<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chore Dashboard</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üèÜ</text></svg>">
    <link rel="stylesheet" href="css/style.css?v=1766776943">
    <link rel="stylesheet" href="css/desktop.css?v=1766776943">
    <script>
        (function() {
            const params = new URLSearchParams(window.location.search);
            if (params.get('force') === 'true') return;

            var isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(navigator.userAgent);
            if (isMobile && window.innerWidth < 800) {
                window.location.href = "mobile.html";
            }
        })();
    </script>
    <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
</head>
<body>
    <a href="mobile.html" class="version-link">Versi√≥n M√≥vil üì±</a>
    <h1>üèÜ Chore Champions</h1>

    <div class="input-section">
        <div class="mode-tabs">
            <button class="tab-btn active" data-target="status">Puntajes</button>
            <button class="tab-btn" data-target="history">Historial</button>
            <button class="tab-btn" data-target="admin">Admin</button>
        </div>

        <div id="tab-content-status" class="tab-content active">
            <div id="leaderboard-container">Loading...</div>
            <button id="btnRefresh" class="context-btn" style="width:100%; margin-top:15px;">‚Üª Actualizar</button>
        </div>

        <div id="tab-content-history" class="tab-content">
            <div id="history-timeline">
                </div>
        </div>

        <div id="tab-content-admin" class="tab-content">
            <div class="admin-panel">
                <h3>üë• Gesti√≥n de Usuarios</h3>
                <table class="crud-table" id="admin-users-table">
                    <thead>
                        <tr>
                            <th>Nombre</th>
                            <th>Pts</th>
                            <th>Acciones</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>

                <div class="add-row">
                    <input type="text" id="newUserName" placeholder="Nuevo Usuario (ej. Juan)">
                    <button id="btnCreateUser" class="small-btn">+</button>
                </div>
            </div>
            <hr style="border: 0; border-top: 1px dashed #ccc; margin: 2rem 0;">
            <div class="admin-panel">
                <h3>üìã Gesti√≥n de Tareas</h3>
                <table class="crud-table" id="admin-tasks-table">
                    <thead>
                        <tr>
                            <th>Tarea</th>
                            <th>Pts</th>
                            <th>Acciones</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
                <div class="add-row">
                    <input type="text" id="newTaskTitle" placeholder="Nueva Tarea (ej. Lavar Auto)">
                    <input type="number" id="newTaskPoints" placeholder="Pts" style="width: 80px;">
                    <button id="btnCreateTask" class="small-btn">+</button>
                </div>
            </div>
        </div>
    </div>
    <div id="toast"></div>
    <script src="js/api.js?v=1766776943"></script>
    <script src="js/desktop.js?v=1766776943"></script>
</body>
</html>
